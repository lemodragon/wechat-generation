<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–°è¡£è‰Pubåœ¨çº¿å°å·¥å…·</title>
    <meta name="keywords"
        content="å…è´¹åœ¨çº¿å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨ï¼Œå¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨ï¼Œå¾®ä¿¡æœ‹å‹åœˆç”Ÿæˆå™¨ï¼Œå¾®ä¿¡è½¬è´¦ç”Ÿæˆå™¨ï¼Œå¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨æ— æ°´å°,æ— æ°´å°,å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨,çº¢åŒ…èŠå¤©,å¾®ä¿¡èŠå¤©åœ¨çº¿ç”Ÿæˆå™¨,å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨åœ¨çº¿,å¾®ä¿¡å¯¹è¯åœ¨çº¿åˆ¶ä½œ,å¾®ä¿¡æˆªå›¾ç”Ÿæˆå™¨,å¾®ä¿¡å¯¹è¯æ¡†ç”Ÿæˆå™¨" />
    <meta name="description"
        content="åœ¨çº¿å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨æ˜¯ä¸€æ¬¾åœ¨çº¿å¾®ä¿¡èŠå¤©å¯¹è¯åˆ¶ä½œçš„å·¥å…·ï¼Œå…è´¹åœ¨çº¿åˆ¶ä½œå¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨å’Œè½¬è´¦ï¼Œå¯ä»¥ç”Ÿæˆæ— æ°´å°å¾®ä¿¡è½¬è´¦ã€å¾®ä¿¡èŠå¤©ã€å¾®ä¿¡çº¢åŒ…ã€èŠå¤©è®°å½•ç­‰æˆªå›¾ï¼Œé€šè¿‡ç®€å•çš„è®¾ç½®ï¼Œç”Ÿæˆä½ æƒ³è¦çš„æˆªå›¾ï¼Œæ˜¯è¿›è¡Œå„ç§æ®µå­åˆ›ä½œåŠè£…Xçš„çƒ­é—¨å·¥å…·ã€‚" />
    <meta name="author" content="è¿½é£å°‘å¹´">
    <meta name="version" content="1.1.0">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="favicon.ico" />
    <script type="text/javascript">
        var _path = { images: '' }
        var page = { data: {} }
    </script>
    <link rel="stylesheet" href="static/app/css/zui.min.css">
    <link rel="stylesheet" href="static/app/css/app.css">
    <link rel="stylesheet" href="static/app/css/wallet.css">
    <script type="text/javascript" src="static/app/js/common.bundle.js"></script>
    <script type="text/javascript" src="static/app/js/cache-manager.js"></script>
    <script type="text/javascript" src="static/app/js/chat.bundle.js"></script>
    <script type="text/javascript" src="static/app/js/vue-cache-integration.js"></script>
    <script src="static/app/js/html2canvas.min.js"></script>
    <!-- gif -->
    <script src="./static/app/js/gif.js"></script>
    <script src="./static/app/js/gif.worker.js"></script>
    <!-- æ·»åŠ Sortable.jsåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <!-- å¼•å…¥æ¶ˆæ¯ç¼–è¾‘ä¸æ’åºåŠŸèƒ½ -->
    <script src="./static/app/js/message-editor.js"></script>

    <!-- ç¼“å­˜ç®¡ç†æ ·å¼ -->
    <style>
        .cache-controls {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .cache-status-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 10px 15px;
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 6px;
        }

        .cache-status-indicator {
            color: #28a745;
            font-size: 13px;
            font-weight: bold;
        }

        .cache-status-label {
            font-size: 13px;
            color: #6c757d;
            font-weight: 500;
        }

        .cache-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .cache-btn {
            padding: 6px 12px;
            font-size: 12px;
            border: 1px solid #007bff;
            background: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s ease;
            min-width: 70px;
            text-align: center;
        }

        .cache-btn:hover {
            background: #0056b3;
            border-color: #0056b3;
            color: white;
            text-decoration: none;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.25);
        }

        .cache-btn.secondary {
            background: #6c757d;
            border-color: #6c757d;
        }

        .cache-btn.secondary:hover {
            background: #545b62;
            border-color: #545b62;
            box-shadow: 0 2px 4px rgba(108, 117, 125, 0.25);
        }

        .cache-btn.danger {
            background: #dc3545;
            border-color: #dc3545;
        }

        .cache-btn.danger:hover {
            background: #c82333;
            border-color: #c82333;
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.25);
        }

        .cache-btn.success {
            background: #28a745;
            border-color: #28a745;
        }

        .cache-btn.success:hover {
            background: #218838;
            border-color: #218838;
            box-shadow: 0 2px 4px rgba(40, 167, 69, 0.25);
        }

        .cache-stats {
            font-size: 11px;
            color: #6c757d;
            margin-top: 10px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 3px solid #007bff;
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .cache-title {
            font-size: 14px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .cache-title::before {
            content: "ğŸ’¾";
            margin-right: 6px;
        }

        @media (max-width: 768px) {
            .cache-controls {
                padding: 12px;
            }

            .cache-buttons {
                gap: 8px;
            }

            .cache-btn {
                font-size: 11px;
                padding: 5px 10px;
                min-width: 60px;
            }

            .cache-status-bar {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
        }

        /* Vue.js æ¨¡æ¿é—ªçƒé˜²æŠ¤æ ·å¼ */
        [v-cloak] {
            display: none !important;
        }

        /* åŠ è½½çŠ¶æ€æ ·å¼ */
        .vue-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            font-size: 16px;
            color: #6c757d;
        }

        .vue-loading::before {
            content: "â³";
            margin-right: 8px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>

<body>
    <div id="vueApp" class="wrapper" v-cloak>
        <div class="container-fluid page-content" style="margin-top: 10px;">
            <div role="alert" class="alert alert-warning" style="color: red;">
                å£°æ˜ï¼šæœ¬ç«™åŠŸèƒ½ä»…ä¾›å¨±ä¹ï¼Œæ­£å¼åœºåˆè¯·å‹¿ä½¿ç”¨ï¼Œ<b>ä¸¥ç¦ç”¨äºè¿æ³•è¡Œä¸º</b>ï¼Œå¦åˆ™åæœè‡ªè´Ÿï¼
                <br>å‹æƒ…æç¤ºï¼šè¯·ä½¿ç”¨ã€è°·æ­Œæµè§ˆå™¨ã€‘æ“ä½œï¼Œä»¥ä¾¿è·å¾—æœ€å¥½çš„æ“ä½œä½“éªŒã€‚
            </div>
            <!-- ç¼“å­˜ç®¡ç†åŒºåŸŸ -->
            <div class="cache-controls">
                <div class="cache-title">æ™ºèƒ½ç¼“å­˜ç®¡ç†</div>
                <div class="cache-status-bar">
                    <span class="cache-status-label">ç¼“å­˜çŠ¶æ€ï¼š</span>
                    <span id="cache-status" class="cache-status-indicator">åˆå§‹åŒ–ä¸­...</span>
                </div>
                <div class="cache-buttons">
                    <button class="cache-btn success" onclick="window.cacheManager.saveAll()"
                        title="ç«‹å³ä¿å­˜æ‰€æœ‰æ•°æ®">æ‰‹åŠ¨ä¿å­˜</button>
                    <button class="cache-btn" onclick="window.cacheManager.createBackup()"
                        title="åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„å¤‡ä»½">åˆ›å»ºå¤‡ä»½</button>
                    <button class="cache-btn" onclick="window.cacheManager.exportData()"
                        title="å¯¼å‡ºæ•°æ®ä¸ºJSONæ–‡ä»¶">å¯¼å‡ºæ•°æ®</button>
                    <div class="file-input-wrapper">
                        <button class="cache-btn"
                            onclick="document.querySelector('.file-input-wrapper input[type=file]').click()"
                            title="ä»JSONæ–‡ä»¶å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</button>
                        <input type="file" accept=".json" onchange="handleImport(this)">
                    </div>
                    <button class="cache-btn secondary" onclick="showCacheStats()" title="æŸ¥çœ‹è¯¦ç»†çš„ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯">ç¼“å­˜ç»Ÿè®¡</button>
                    <button class="cache-btn danger" onclick="window.cacheManager.clearAll()"
                        title="æ¸…ç©ºæ‰€æœ‰ç¼“å­˜æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰">æ¸…ç©ºç¼“å­˜</button>
                </div>
                <div id="cache-stats" class="cache-stats" style="display: none;"></div>
            </div>
            <!--<div id="pageHeader">å¾®ä¿¡å¯¹è¯ç”Ÿæˆå™¨</div>-->
            <div class="edit-content">
                <div class="tab">
                    <ul class="nav nav-tabs">
                        <li><a data-tab href="#tabContent1">å¤–è§‚è®¾ç½®</a></li>
                        <li class="active"><a data-tab href="#tabContent2">å¯¹è¯è®¾ç½®</a></li>
                        <li><a href="https://music.lvdpub.com" target="_blank">éŸ³ä¹</a></li>
                        <li><a href="https://demo.lvdpub.com" target="_blank">ä¸»é¡µ</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane" id="tabContent1">
                            <!-- å¤–è§‚è®¾ç½® -->
                            <div class="view-setting">
                                <div class="view-set-item">
                                    <span>æ‰‹æœºä¿¡å·ï¼š</span>
                                    <select v-model="phone.single" class="form-control">
                                        <option value="1">1æ ¼</option>
                                        <option value="2">2æ ¼</option>
                                        <option value="3">3æ ¼</option>
                                        <option value="4" selected="selected">4æ ¼</option>
                                    </select>
                                </div>
                                <div class="view-set-item">
                                    <span>ç½‘ç»œä¿¡å·ï¼š</span>
                                    <select v-model="phone.wifi" class="form-control">
                                        <option value="1">wifi</option>
                                        <option value="2">3G</option>
                                        <option value="3">4G</option>
                                        <option value="4">5G</option>
                                    </select>
                                </div>
                                <div class="view-set-item">
                                    <span>wifiä¿¡å·ï¼š</span>
                                    <select v-model="phone.wifi_single" class="form-control">
                                        <option value="1">1æ ¼</option>
                                        <option value="2">2æ ¼</option>
                                        <option value="3" selected="selected">3æ ¼</option>
                                    </select>
                                </div>
                                <div class="view-set-item">
                                    <span>æ‰‹æœºæ—¶é—´ï¼š</span>
                                    <select v-model="phone.time_hour"
                                        class="form-control edit-phone-time-hour"></select>
                                    <select v-model="phone.time_mini"
                                        class="form-control edit-phone-time-mini"></select>
                                </div>
                                <div class="view-set-item">
                                    <span>å……ç”µä¸­ï¼š</span>
                                    <label class="my-radio"><input type="radio" name="charge"
                                            v-model="phone.battery_charge" value="1"> æ˜¯</label>
                                    <label class="my-radio"><input type="radio" name="charge"
                                            v-model="phone.battery_charge" value="0" checked> å¦</label>
                                </div>
                                <div class="view-set-item">
                                    <span>æ‰‹æœºç”µé‡ï¼š</span>
                                    <input @change="onBatteryChange($event)" type="range" v-model="phone.battery_amount"
                                        min="0" max="100" value="50" />
                                    &nbsp;&nbsp;&nbsp;{{phone.battery_amount}}%
                                </div>
                                <div class="view-set-item">
                                    <span>å¬ç­’æ¨¡å¼ï¼š</span>
                                    <label class="my-radio"><input type="radio" name="phone-ear" v-model="phone.ear"
                                            value="1"> æ˜¯</label>
                                    <label class="my-radio"><input type="radio" name="phone-ear" v-model="phone.ear"
                                            value="0" checked> å¦</label>
                                </div>
                                <div class="view-set-item">
                                    <span>æ¶ˆæ¯æ•°ç›®ï¼š</span>
                                    <input type="number" name="phone-msg-count" class="form-control"
                                        v-model.number="setting.message">
                                </div>
                                <div class="view-set-item">
                                    <span>èŠå¤©æ ‡é¢˜ï¼š</span>
                                    <input type="text" class="form-control" v-model="setting.title">
                                </div>
                                <div class="view-set-item">
                                    <span>è¯­éŸ³æ¨¡å¼ï¼š</span>
                                    <label class="my-radio"><input type="radio" name="phone-voice"
                                            v-model="setting.voice" value="1"> æ˜¯</label>
                                    <label class="my-radio"><input type="radio" name="phone-voice"
                                            v-model="setting.voice" value="0" checked> å¦</label>
                                </div>
                                <div class="view-set-item">
                                    <span>èŠå¤©èƒŒæ™¯ï¼š</span>
                                    <a class="a-phone-set-bg" href="javascript:;" title="é€‰æ‹©èƒŒæ™¯å›¾">
                                        <font>+</font>
                                        <img class="img-phone-set-bg" :src="setting.background" />
                                        <input @change="setBackground($event)" type="file" />
                                        <span @click="deleteBackground" v-if="setting.background != ''">x</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- å¯¹è¯è®¾ç½® -->
                        <div class="tab-pane active" id="tabContent2">
                            <div class="dialog-user">
                                <div class="dialog-user-title">ç¼–è¾‘å’Œé€‰æ‹©ç”¨æˆ·ï¼ˆ<font>ç¬¬ä¸€ä¸ªç”¨æˆ·é»˜è®¤æ˜¯è‡ªå·±ï¼Œç‚¹å‡»å¤´åƒå¯æ›´æ¢å¤´åƒå“¦</font>ï¼‰</div>
                                <div class="dialog-user-items">
                                    <div v-for="(user, index) in users" class="dialog-user-item">
                                        <div class="dialog-user-face">
                                            <a class="dialog-user-face-a" href="javascript:;">
                                                <input @change="setUserImage($event, index)" type="file"
                                                    placeholder="ç‚¹å‡»æ›´æ¢å¤´åƒ">
                                                <i :style="'background-image: url(' + user.image + ')'"></i>
                                            </a>
                                            <input type="text" v-model="user.name" />
                                            <a @click="selectUser(index)"
                                                :class="['dialog-user-select', {'dialog-user-selected':user.selected}]">é€‰æ‹©ç”¨æˆ·</a>
                                            <a v-if="!user.is_me" @click="delUser(index)" class="dialog-user-delete"
                                                title="åˆ é™¤ç”¨æˆ·">x</a>
                                        </div>
                                    </div>
                                    <div class="dialog-user-item">
                                        <a @click="addUser" class="dialog-user-item-add" href="javascript:;"
                                            title="æ·»åŠ ç”¨æˆ·">+</a>
                                    </div>
                                </div>

                                <div class="dialog-user-content-title">å‘é€äººï¼š{{getSender()}}</div>
                                <div class="dialog-user-content">
                                    <div class="dialog-user-content-panel">
                                        <textarea v-model="setting.dialog_content"
                                            class="edit-dialog-text form-control"></textarea>
                                    </div>
                                    <div class="view-setting view-setting2">
                                        <div class="view-set-item">
                                            <span>çº¢åŒ…æˆ–è½¬è´¦é‡‘é¢ï¼š</span>
                                            <input v-model.number="setting.dialog_money" type="number"
                                                class="form-control">
                                        </div>
                                        <div class="view-set-item">
                                            <span>æ·»åŠ èŠå¤©æ—¶é—´ï¼š</span>
                                            <select v-model="setting.date_year"
                                                class="form-control edit-phone-time-year">
                                                <option value="">-</option>
                                            </select>
                                            <select v-model="setting.date_month"
                                                class="form-control edit-phone-time-month" style="width: 60px;">
                                                <option value="">-</option>
                                            </select>
                                            <select v-model="setting.date_day" class="form-control edit-phone-time-day"
                                                style="width: 60px;">
                                                <option value="">-</option>
                                            </select>
                                            <select v-model="setting.date_xinqi" class="form-control">
                                                <option value="">-</option>
                                                <option value="æ˜ŸæœŸä¸€">æ˜ŸæœŸä¸€</option>
                                                <option value="æ˜ŸæœŸäºŒ">æ˜ŸæœŸäºŒ</option>
                                                <option value="æ˜ŸæœŸä¸‰">æ˜ŸæœŸä¸‰</option>
                                                <option value="æ˜ŸæœŸå››">æ˜ŸæœŸå››</option>
                                                <option value="æ˜ŸæœŸäº”">æ˜ŸæœŸäº”</option>
                                                <option value="æ˜ŸæœŸå…­">æ˜ŸæœŸå…­</option>
                                                <option value="æ˜ŸæœŸæ—¥">æ˜ŸæœŸæ—¥</option>
                                            </select>
                                            <select v-model="setting.date_shiduan" class="form-control"
                                                style="width: 60px;">
                                                <option value="">-</option>
                                                <option value="ä¸Šåˆ">ä¸Šåˆ</option>
                                                <option value="ä¸‹åˆ">ä¸‹åˆ</option>
                                                <option value="å‡Œæ™¨">å‡Œæ™¨</option>
                                            </select>
                                            <select v-model="setting.date_hour"
                                                class="form-control edit-phone-time-hour" style="width: 60px;">

                                            </select>
                                            ï¼š
                                            <select v-model="setting.date_min" class="form-control edit-phone-time-mini"
                                                style="width: 60px;">

                                            </select>
                                        </div>
                                        <div class="view-set-item">
                                            <span>è¯­éŸ³æ—¶é—´ï¼š</span>
                                            <input v-model.number="setting.dialog_voice" type="number"
                                                class="form-control">
                                            &nbsp;&nbsp;&nbsp;
                                            <label>æ˜¯å¦å·²è¯»ï¼š</label>
                                            <label class="my-radio"><input type="radio"
                                                    v-model="setting.dialog_voice_isread" value="1" checked>
                                                æ˜¯</label>
                                            <label class="my-radio"><input type="radio"
                                                    v-model="setting.dialog_voice_isread" value="0"> å¦</label>
                                        </div>
                                        <div class="view-set-item">
                                            <span>çº¢åŒ…å¤‡æ³¨ï¼š</span>
                                            <input v-model="setting.dialog_repacket_remark" type="text"
                                                class="form-control">
                                        </div>
                                        <div class="view-set-item">
                                            <span>è½¬è´¦å¤‡æ³¨ï¼š</span>
                                            <input v-model="setting.dialog_trans_remark" type="text"
                                                class="form-control">
                                        </div>
                                    </div>
                                    <div class="btn-groups">
                                        <div class="btn-group">
                                            <button @click="addTextDialog" class="btn btn-success">æ·»åŠ æ–‡å­—å¯¹è¯</button>
                                            <button @click="addNoticeDialog" class="btn btn-primary">æ·»åŠ æ—¶é—´</button>
                                            <button class="btn btn-primary btn-send-image">æ·»åŠ å›¾ç‰‡å¯¹è¯<input
                                                    @change="addImageDialog($event)" type="file"></button>

                                        </div>
                                        <div class="btn-group">
                                            <button @click="addVoiceDialog" class="btn btn-primary">æ·»åŠ è¯­éŸ³å¯¹è¯</button>
                                            <button @click="addRedpacketDialog" class="btn btn-primary">æ·»åŠ çº¢åŒ…å¯¹è¯</button>
                                            <button @click="addTransferDialog" class="btn btn-primary">æ·»åŠ è½¬è´¦å¯¹è¯</button>
                                        </div>
                                    </div>
                                    <button class="btn-clear" @click="cleanDialogs" href="javascript:;">æ¸…ç©ºèŠå¤©å†…å®¹</button>
                                    <button class="btn-clear" @click="save" href="javascript:;">ç”Ÿæˆå›¾ç‰‡</button>
                                    <button class="btn-clear" id="downGif">ç”ŸæˆGIF</button>
                                    <div style="margin-top: 20px;">
                                        <p>ç”Ÿæˆè§†é¢‘åŠŸèƒ½: ç‚¹å‡»ä¸‹æ–¹çš„"å¼€å§‹å½•åˆ¶"æŒ‰é’®å³å¯å½•åˆ¶è§†é¢‘ï¼ˆåœæ­¢å½•åˆ¶åä¼šåœ¨å³ä¾§ç”Ÿæˆè§†é¢‘ï¼Œæ‚¨å¯ä»¥ä¸‹è½½è¯¥è§†é¢‘ï¼‰</p>
                                        <p>ç”ŸæˆGIFå›¾ç‰‡: ç‚¹å‡»ä¸‹æ–¹çš„"å¼€å§‹å½•åˆ¶"æŒ‰é’®å³å¯ç”ŸæˆåŠ¨æ€å›¾ç‰‡ï¼ˆåœæ­¢å½•åˆ¶åç‚¹å‡»ä¸Šæ–¹çš„"ç”ŸæˆGIF"æŒ‰é’®ä¸‹è½½GIFå›¾ç‰‡ï¼‰</p>
                                        <p>ä¸ºäº†å°Šé‡åŸä½œè€…çš„æƒç›Šï¼Œæ›´å¤šçš„é«˜çº§åŠŸèƒ½ï¼Œè¯·è¯¢é—®åŸä½œè€…ï¼Œè¿™é‡Œåªæ˜¯å…è´¹ç‰ˆçš„ä½“éªŒç”¨é€”ï¼Œç‚¹å‡»è·³è½¬åŸä½œè€…é“¾æ¥<a
                                                href='https://gitee.com/lifeixue/weixin-chat'>åŸä½œè€…åœ°å€</a></p>
                                    </div>
                                    <button class="btn-recording" id="btn-start-recording">å¼€å§‹å½•åˆ¶</button>
                                    <button class="btn-recording" id="btn-stop-recording" disabled>åœæ­¢å½•åˆ¶</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- phone -->
                <div class="phone-wrap" id="element-to-record">
                    <div class="phone-content">
                        <div id="phone" class="phone">
                            <div class="phone-top">
                                <div class="phone-bar">
                                    <div class="phone-time">{{phone.time_hour}}:{{phone.time_mini}}</div>
                                    <div
                                        :class="['phone-sigle', {'phone-sigle-v1':phone.single == 1}, {'phone-sigle-v2':phone.single == 2}, {'phone-sigle-v3':phone.single == 3}, {'phone-sigle-v4':phone.single == 4}]">
                                        ä¿¡å·</div>
                                    <div
                                        :class="['phone-wifi', {'phone-wifi-v2':phone.wifi > 1}, phone.wifi == 1 ? 'phone-wifi-s' + phone.wifi_single : '']">
                                        <template v-if="phone.wifi == 1">
                                            wifi
                                        </template>
                                        <template v-else-if="phone.wifi == 2">
                                            3G
                                        </template>
                                        <template v-else-if="phone.wifi == 3">
                                            4G
                                        </template>
                                        <template v-else-if="phone.wifi == 4">
                                            5G
                                        </template>
                                    </div>
                                    <div :class="['phone-battery', {'phone-battery-charge':phone.battery_charge == 1}]">
                                        <span>
                                            <font :style="[{width: phone.battery_amount + '%'}]">ç”µé‡</font>
                                            <i></i>
                                        </span>
                                    </div>
                                </div>
                                <div class="phone-nav">
                                    <div class="phone-nav-left">
                                        <div class="phone-nav-back">è¿”å›</div>
                                        <span v-if="setting.message && setting.message > 0">{{setting.message}}</span>
                                    </div>
                                    <div class="phone-nav-center">
                                        <span>
                                            <font>{{setting.title}}</font>
                                            <i v-if="phone.ear == 1"></i>
                                        </span>
                                    </div>
                                    <div class="phone-nav-right">
                                        <div class="phone-nav-more">æ›´å¤š</div>
                                    </div>
                                </div>
                            </div>

                            <div class="phone-bg">
                                <img @load="onBackgroundLoad($event)" :src="setting.background" />
                            </div>

                            <div class="phone-water"></div>

                            <div class="phone-body">
                                <div class="wechat-content" id="sortableList">
                                    <template v-for="(dialog, index) in dialogs">
                                        <div :class="['wechat-dialog', {'wechat-dialog-right':dialog.is_me}]">
                                            <div v-if="dialog.type != 'notice'" class="wechat-dialog-face">
                                                <img :src="getUserById(dialog.user_id).image" />
                                            </div>

                                            <template v-if="dialog.type == 'text'">
                                                <div class="wechat-dialog-text" v-if="!dialog.isEditing">
                                                    {{dialog.content}}</div>
                                                <div class="wechat-dialog-text wechat-dialog-editing"
                                                    v-if="dialog.isEditing">
                                                    <textarea v-model="dialog.editContent"
                                                        class="edit-message-textarea"></textarea>
                                                    <div class="edit-message-actions">
                                                        <button @click="saveEditedDialog(index)"
                                                            class="btn-edit-save">ä¿å­˜</button>
                                                        <button @click="cancelEditDialog(index)"
                                                            class="btn-edit-cancel">å–æ¶ˆ</button>
                                                    </div>
                                                </div>
                                            </template>

                                            <template v-if="dialog.type == 'image'">
                                                <div
                                                    :class="['wechat-dialog-text', 'wechat-dialog-image', {'wechat-dialog-image-noborder':setting.background != ''}]">
                                                    <img :src="dialog.image">
                                                </div>
                                            </template>

                                            <template v-if="dialog.type == 'voice'">
                                                <div class="wechat-dialog-text wechat-dialog-voice">
                                                    <div v-if="dialog.is_me"
                                                        :style="{width: getVoiceLength(dialog.time) + 'px'}"></div>
                                                    <span v-if="dialog.is_me">{{dialog.time}}"</span>
                                                    <i></i>
                                                    <span v-if="!dialog.is_me">{{dialog.time}}"</span>
                                                    <div v-if="!dialog.is_me"
                                                        :style="{width: getVoiceLength(dialog.time) + 'px'}"></div>
                                                    <em v-if="!dialog.is_me && dialog.isread == '0'"></em>
                                                </div>
                                            </template>

                                            <template v-if="dialog.type == 'notice'">
                                                <div class="wechat-dialog-notice">
                                                    <span
                                                        :class="[{'wechat-dialog-notice-has-bg':setting.background != ''},{'wechat-dialog-notice-system':dialog.is_system}]"
                                                        v-html="dialog.content"></span>
                                                </div>
                                            </template>

                                            <template v-if="dialog.type == 'transfer' || dialog.type == 'redpacket'">
                                                <div
                                                    :class="['wechat-dialog-text', 'wechat-dialog-trans', {'wechat-dialog-trans-get':dialog.is_get}]">
                                                    <div
                                                        :class="['wechat-dialog-trans-content', {'wechat-dialog-redp-content':dialog.type == 'redpacket'}]">
                                                        <i></i>
                                                        <div>
                                                            <span
                                                                v-if="dialog.type == 'transfer'">Â¥{{moneyFormat(dialog.money,
                                                                2, '', false)}}</span>
                                                            <font v-if="dialog.type == 'transfer'">{{dialog.remark}}
                                                            </font>
                                                            <span
                                                                v-if="dialog.type == 'redpacket'">{{dialog.remark}}</span>
                                                            <font v-if="dialog.type == 'redpacket' && dialog.is_get">
                                                                å·²é¢†å–</font>
                                                        </div>
                                                    </div>
                                                    <div class="wechat-dialog-trans-bottom">
                                                        <span v-if="dialog.type == 'transfer'">å¾®ä¿¡è½¬è´¦</span>
                                                        <span v-if="dialog.type == 'redpacket'">å¾®ä¿¡çº¢åŒ…</span>
                                                    </div>
                                                </div>
                                            </template>

                                            <a @click="deleteDialog(index)" class="a-wechat-dialog-del"
                                                href="javascript:;" title="åˆ é™¤å¯¹è¯">X</a>

                                            <a v-if="dialog.type == 'text' && !dialog.isEditing"
                                                @click="editDialog(index)" class="a-wechat-dialog-edit"
                                                href="javascript:;" title="ç¼–è¾‘å¯¹è¯">âœ</a>

                                            <div v-if="!dialog.is_get && dialog.type == 'redpacket'"
                                                class="a-wechat-dialog-menu">
                                                <a @click="redpacketGet(index)">é¢†å–</a>
                                            </div>
                                            <div v-if="!dialog.is_get && dialog.type == 'transfer'"
                                                class="a-wechat-dialog-menu">
                                                <a @click="transferGet(index)">é¢†å–</a>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            <div class="phone-bottom">
                                <div class="phone-bottom-chat">
                                    <div class="wechat-bottom">
                                        <div
                                            :class="['wechat-bottom-icon', 'wechat-voice-icon', {'wechat-voice-say-icon':setting.voice == 1}]">
                                            è¯­éŸ³</div>
                                        <div :class="['wechat-input', {'wechat-input-say':setting.voice == 1}]">
                                            <template v-if="setting.voice == 1">æŒ‰ä½ è¯´è¯</template>
                                            <template v-else>è¾“å…¥æ¡†</template>
                                        </div>
                                        <div class="wechat-bottom-icon wechat-emoji-icon">è¡¨æƒ…</div>
                                        <div class="wechat-bottom-icon wechat-more-icon">æ›´å¤šåŠŸèƒ½</div>
                                    </div>
                                </div>
                                <div class="phone-bottom-bar">
                                    <i>è¿”å›æ¡Œé¢</i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: none; margin-left: 10px;">
                    <video controls autoplay playsinline id="preview-video"></video>
                </div>
                <canvas id="background-canvas" style="position: absolute; left: -99999px;"></canvas>
            </div>
        </div>
        <!-- <canvas id="background-canvas" style="position: absolute; left: -99999px;"></canvas> -->
    </div>
    <a style="display: none;" id="lightBoxToggle" href="javascript:;" data-width="300"
        data-caption="å³å‡»å›¾ç‰‡ï¼Œç‚¹å‡»å›¾ç‰‡å¦å­˜ä¸ºå³å¯ä¸‹è½½å›¾ç‰‡">ç”Ÿæˆå›¾ç‰‡</a>

    <!-- ç¼“å­˜ç®¡ç†è„šæœ¬ -->
    <script>
        /**
         * å¤„ç†æ–‡ä»¶å¯¼å…¥
         */
        function handleImport(input) {
            const file = input.files[0];
            if (file) {
                // æ˜¾ç¤ºå¯¼å…¥å¼€å§‹æç¤º
                if (window.cacheManager) {
                    window.cacheManager.updateCacheStatus('å¼€å§‹å¯¼å…¥æ•°æ®...');
                    window.cacheManager.showNotification('æ­£åœ¨è¯»å–æ–‡ä»¶ï¼Œè¯·ç¨å€™...', 'info');
                }

                window.cacheManager.importData(file).then(() => {
                    console.log('æ•°æ®å¯¼å…¥æˆåŠŸ');
                }).catch((error) => {
                    console.error('æ•°æ®å¯¼å…¥å¤±è´¥:', error);
                    if (window.cacheManager) {
                        window.cacheManager.updateCacheStatus('å¯¼å…¥å¤±è´¥');
                        window.cacheManager.showNotification('æ•°æ®å¯¼å…¥å¤±è´¥ï¼š' + error.message, 'error');
                    }
                });
                input.value = ''; // æ¸…ç©ºè¾“å…¥ï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
            }
        }

        /**
         * æ˜¾ç¤º/éšè—ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯
         */
        function showCacheStats() {
            const statsElement = document.getElementById('cache-stats');
            const isVisible = statsElement.style.display !== 'none';

            if (isVisible) {
                statsElement.style.display = 'none';
            } else {
                const stats = window.cacheManager.getCacheStats();
                statsElement.innerHTML = `
                    <strong>ğŸ“Š ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯</strong><br>
                    â€¢ è®¾ç½®ç¼“å­˜: ${stats.setting ? 'âœ… å·²ä¿å­˜' : 'âŒ æœªä¿å­˜'}<br>
                    â€¢ ç”¨æˆ·æ•°é‡: ${stats.users} ä¸ª<br>
                    â€¢ å¯¹è¯æ•°é‡: ${stats.dialogs} æ¡<br>
                    â€¢ å¤‡ä»½æ•°é‡: ${stats.backupCount} ä¸ª<br>
                    â€¢ æœ€åä¿å­˜: ${stats.lastSave || 'æœªçŸ¥'}
                `;
                statsElement.style.display = 'block';
            }
        }

        /**
         * é¡µé¢åŠ è½½åçš„åˆå§‹åŒ–
         */
        document.addEventListener('DOMContentLoaded', function () {
            // ç­‰å¾…ç¼“å­˜ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ
            setTimeout(() => {
                if (window.cacheManager) {
                    // æ˜¾ç¤ºåˆå§‹ç»Ÿè®¡ä¿¡æ¯
                    showCacheStats();
                    setTimeout(() => {
                        document.getElementById('cache-stats').style.display = 'none';
                    }, 3000);

                    // åˆå§‹åŒ–çŠ¶æ€æ˜¾ç¤º
                    window.cacheManager.updateCacheStatus('ç¼“å­˜ç³»ç»Ÿå·²å°±ç»ª');
                }
            }, 1500);
        });

        /**
         * æ‰©å±•Vueåº”ç”¨ä»¥é›†æˆç¼“å­˜ç®¡ç†å™¨
         */
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(function () {
                if (window.vueApp && window.cacheManager) {
                    // ä¿å­˜Vueåº”ç”¨å®ä¾‹çš„å¼•ç”¨ä»¥ä¾¿ç¼“å­˜ç®¡ç†å™¨è®¿é—®
                    window.cacheManager.vueApp = window.vueApp;
                    console.log('Vueåº”ç”¨ä¸ç¼“å­˜ç®¡ç†å™¨é›†æˆå®Œæˆ');
                }
            }, 2000);
        });

        /**
         * å…¨å±€é”™è¯¯å¤„ç†
         */
        window.addEventListener('error', function (event) {
            console.error('é¡µé¢é”™è¯¯:', event.error);
            if (window.cacheManager) {
                window.cacheManager.updateCacheStatus('å‘ç”Ÿé”™è¯¯ï¼Œå·²è‡ªåŠ¨ä¿å­˜');
                window.cacheManager.saveAll();
            }
        });

        /**
         * é¡µé¢å¯è§æ€§å˜åŒ–å¤„ç†
         */
        document.addEventListener('visibilitychange', function () {
            if (window.cacheManager) {
                if (document.hidden) {
                    window.cacheManager.updateCacheStatus('é¡µé¢éšè—ï¼Œå·²ä¿å­˜');
                } else {
                    window.cacheManager.updateCacheStatus('é¡µé¢æ¿€æ´»ï¼Œç¼“å­˜æ­£å¸¸');
                }
            }
        });
    </script>
</body>

</html>